
/* === Pagefind Bridge — estilo harmonizado com o tema do site ===
   Usa variáveis definidas em styles.css (:root) para manter consistência visual.
   - Botão "Buscar no conteúdo" segue a aparência do .reset-btn
   - Modal claro, cartões de resultados e tipografia coerentes
=================================================================*/

/* Backdrop do modal */
#pf-overlay-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: none;
  z-index: 9998;
}

/* Janela do modal */
#pf-overlay {
  position: fixed;
  inset: 6% 10%;
  background: white;
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: var(--shadow-hover);
  z-index: 9999;
  display: none;
  overflow: hidden;
  max-height: 90vh;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

[data-theme="dark"] #pf-overlay {
  background: #252525;
  border-color: #333;
}

/* Cabeçalho do modal */
#pf-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  background: white;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

[data-theme="dark"] #pf-header {
  background: #2a2a2a;
  border-color: #333;
}

#pf-header .title {
  font-weight: 600;
  font-size: 1rem;
  color: var(--text-color);
}

#pf-header .count {
  opacity: .8;
  font-size: .95rem;
  margin-left: .5rem;
  color: var(--text-muted);
}

#pf-close {
  background: transparent;
  border: 0;
  color: var(--text-muted);
  font-size: 1.3rem;
  cursor: pointer;
}
#pf-close:hover { color: var(--primary-color); }

/* Conteúdo do modal */
#pf-body {
  padding: 12px 16px 16px;
  overflow: auto;
  max-height: calc(90vh - 54px);
}

/* Cada resultado */
.pf-hit {
  display: block;
  padding: 12px 12px;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  text-decoration: none;
  color: inherit;
  background: #fafafa;
  margin-bottom: 10px;
  transition: box-shadow .2s ease, transform .2s ease, background-color 0.3s ease, border-color 0.3s ease;
}

[data-theme="dark"] .pf-hit {
  background: #2a2a2a;
  border-color: #333;
}

.pf-hit:hover { box-shadow: var(--shadow-hover); transform: translateY(-1px); }

.pf-title {
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--text-color);
}

.pf-hit .pf-url {
  font-size: .82rem;
  opacity: .75;
  margin-top: .25rem;
  color: var(--text-muted);
}

.pf-snippet {
  font-size: .95rem;
  line-height: 1.45;
  margin-top: .25rem;
  color: var(--text-color);
  opacity: 1;
}

.pf-empty {
  opacity: .85;
  padding: .5rem 0;
  color: var(--text-muted);
}

/* Botão "Buscar no conteúdo" — harmonizado com .reset-btn */
#pf-trigger {
  display: block;
  margin: 8px auto 0 auto;  /* centraliza horizontalmente abaixo do input */
  padding: 12px 16px;
  font-size: .95rem;
  font-weight: 600;
  border: 2px solid var(--primary-color);
  border-radius: 10px;
  background: transparent;
  color: var(--primary-color);
  cursor: pointer;
  transition: all .2s ease;
  font-family: inherit;
  white-space: nowrap;
  width: fit-content;       /* mantém tamanho ao conteúdo */
}

[data-theme="dark"] #pf-trigger {
  background: transparent;
}

#pf-trigger:hover {
  background: var(--primary-color);
  color: white;
  box-shadow: var(--shadow-hover);
}

#pf-trigger:active { transform: scale(0.98); }

#pf-trigger .badge {
  display: inline-block;
  padding: 0 .25rem;
  border-radius: 8px;
  background: var(--badge-bg);
  border: 1px solid var(--badge-border);
  color: var(--primary-color);
  font-size: .85rem;
  line-height: 1.1;
}

/* Destacar matches (caso venha marcado do Pagefind) */
#pf-body mark {
  background: #ffe08a;
  padding: 0 .1em;
  border-radius: .2em;
  transition: background-color 0.3s ease;
}

[data-theme="dark"] #pf-body mark {
  background: var(--primary-color);
  color: #fff;
}

/* Responsividade */
@media (max-width: 768px) {
  #pf-overlay { inset: 6% 4%; }
  #pf-body { padding: 10px 12px 12px; }
  #pf-trigger {
    padding: 10px 14px;
    font-size: .9rem;
  }
}

/* ==== Overrides Pagefind: trechos mais longos nos resultados ==== */
.pagefind-ui__result-excerpt,
.pagefind-ui__result-excerpt p {
  display: block !important;
  overflow: visible !important;
  max-height: none !important;
  -webkit-line-clamp: unset !important;
  line-clamp: unset !important;
  white-space: normal !important;
}


/* --- Pagefind overlay filters (multi-select para tipo/ano) --- */
#pf-overlay .pf-filters{
  display:flex;
  gap:0.75rem;
  align-items:flex-end;
  flex-wrap:wrap;
  margin: 0.5rem 0 1rem 0;
}
#pf-overlay .pf-filter-group{
  display:flex;
  flex-direction:column;
  gap:0.25rem;
}
#pf-overlay .pf-filter-group select{
  min-width: 200px;
  max-width: 320px;
  min-height: 2.2rem;
}
#pf-overlay .pf-clear{
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--border-color);
  background: #f6f6f6;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

[data-theme="dark"] #pf-overlay .pf-clear {
  background: #2a2a2a;
  border-color: #333;
  color: var(--text-color);
}

#pf-overlay .pf-clear:hover{
  background:#eee;
}

[data-theme="dark"] #pf-overlay .pf-clear:hover {
  background: #333;
}


/* ==== Harmonização da barra de pesquisa do Pagefind ==== */
/* Estilo igual ao #searchInput da página principal */

/* Seletores do Pagefind UI para o input de busca */
.pagefind-ui__search-input,
#pf-overlay input[type="search"],
#pf-overlay input[type="text"],
#pf-body input[type="search"],
#pf-body input[type="text"] {
  width: 100% !important;
  padding: 16px 20px 16px 45px !important;
  font-size: 1rem !important;
  border: 2px solid var(--primary-color) !important;
  border-radius: 12px !important;
  background: white !important;
  color: var(--text-color) !important;
  transition: all .2s ease !important;
  font-family: inherit !important;
  box-shadow: none !important;
}

/* Modo dark para a barra de pesquisa */
[data-theme="dark"] .pagefind-ui__search-input,
[data-theme="dark"] #pf-overlay input[type="search"],
[data-theme="dark"] #pf-overlay input[type="text"],
[data-theme="dark"] #pf-body input[type="search"],
[data-theme="dark"] #pf-body input[type="text"] {
  background: #2a2a2a !important;
  color: #e0e0e0 !important;
}

/* Estado de foco */
.pagefind-ui__search-input:focus,
#pf-overlay input[type="search"]:focus,
#pf-overlay input[type="text"]:focus,
#pf-body input[type="search"]:focus,
#pf-body input[type="text"]:focus {
  outline: none !important;
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 4px rgba(0, 85, 204, 0.1) !important;
}

[data-theme="dark"] .pagefind-ui__search-input:focus,
[data-theme="dark"] #pf-overlay input[type="search"]:focus,
[data-theme="dark"] #pf-overlay input[type="text"]:focus,
[data-theme="dark"] #pf-body input[type="search"]:focus,
[data-theme="dark"] #pf-body input[type="text"]:focus {
  box-shadow: 0 0 0 4px rgba(74, 158, 255, 0.2) !important;
}

/* Placeholder */
.pagefind-ui__search-input::placeholder,
#pf-overlay input[type="search"]::placeholder,
#pf-overlay input[type="text"]::placeholder,
#pf-body input[type="search"]::placeholder,
#pf-body input[type="text"]::placeholder {
  color: var(--text-muted) !important;
}

/* Remover estilos padrão do Pagefind que podem conflitar */
.pagefind-ui__search-clear {
  background: transparent !important;
  color: var(--text-muted) !important;
}

[data-theme="dark"] .pagefind-ui__search-clear {
  color: #a0a0a0 !important;
}

/* Container da busca do Pagefind */
.pagefind-ui__form,
.pagefind-ui__search {
  background: transparent !important;
}


/* ==== Correção: Ocultar lupa quando o usuário digita ==== */
/* A lupa do Pagefind é adicionada via ::before no container do input */
/* Precisamos ocultá-la quando o input tiver valor (não vazio) */

/* Ocultar lupa quando o input não está vazio */
.pagefind-ui__search-input:not(:placeholder-shown) {
  padding-left: 20px !important;  /* Remove espaço extra da lupa */
}

/* Ocultar o ícone de lupa do Pagefind quando houver texto */
.pagefind-ui__form:has(input:not(:placeholder-shown)) .pagefind-ui__search-clear {
  display: block !important;
}

/* Alternativa: usar JavaScript para adicionar classe quando houver texto */
/* Mas vamos tentar primeiro com CSS puro usando :not(:placeholder-shown) */

/* Se o Pagefind usar um elemento separado para a lupa, ocultá-lo */
.pagefind-ui__search-input:not(:placeholder-shown) ~ .pagefind-ui__search-icon,
.pagefind-ui__search-input:not(:placeholder-shown) + .pagefind-ui__search-icon {
  display: none !important;
  opacity: 0 !important;
}

/* Se a lupa for um pseudo-elemento ::before ou ::after */
.pagefind-ui__form:has(input:not(:placeholder-shown))::before,
.pagefind-ui__search:has(input:not(:placeholder-shown))::before {
  display: none !important;
  opacity: 0 !important;
}

/* Ajustar padding do input quando vazio (com lupa) vs quando preenchido (sem lupa) */
.pagefind-ui__search-input:placeholder-shown {
  padding-left: 40px !important;  /* Espaço para a lupa */
}

.pagefind-ui__search-input:not(:placeholder-shown) {
  padding-left: 20px !important;  /* Sem espaço para lupa */
}


/* ==== Correção de Contraste para Modo Dark ==== */
/* Garantir que TODOS os textos sejam legíveis no modo dark */

/* Títulos dos atos/resultados */
[data-theme="dark"] .pf-title {
  color: #e0e0e0 !important;
}

/* Texto dos snippets/descrições */
[data-theme="dark"] .pf-snippet {
  color: #d0d0d0 !important;
}

/* Filtros da sidebar - Labels */
[data-theme="dark"] #pf-overlay label,
[data-theme="dark"] #pf-body label {
  color: #e0e0e0 !important;
}

/* Filtros da sidebar - Títulos de seção (Ano, Órgão, Tipo) */
[data-theme="dark"] #pf-overlay .pf-filter-group label,
[data-theme="dark"] #pf-body .pf-filter-group label {
  color: #e0e0e0 !important;
  font-weight: 600;
}

/* Checkboxes labels */
[data-theme="dark"] input[type="checkbox"] + label,
[data-theme="dark"] input[type="radio"] + label {
  color: #d0d0d0 !important;
}

/* Contagem de resultados */
[data-theme="dark"] #pf-header .count,
[data-theme="dark"] .pf-count {
  color: #b0b0b0 !important;
}

/* Texto geral dentro do modal */
[data-theme="dark"] #pf-overlay,
[data-theme="dark"] #pf-body {
  color: #d0d0d0 !important;
}

/* Selects e inputs de filtro */
[data-theme="dark"] #pf-overlay select,
[data-theme="dark"] #pf-body select {
  background: #2a2a2a !important;
  color: #e0e0e0 !important;
  border-color: #444 !important;
}

/* Options dentro dos selects */
[data-theme="dark"] #pf-overlay option,
[data-theme="dark"] #pf-body option {
  background: #2a2a2a !important;
  color: #e0e0e0 !important;
}

/* Texto de "nenhum resultado" */
[data-theme="dark"] .pf-empty {
  color: #b0b0b0 !important;
}

/* URLs dos resultados */
[data-theme="dark"] .pf-url {
  color: #a0a0a0 !important;
}

/* Qualquer parágrafo ou texto dentro do modal */
[data-theme="dark"] #pf-overlay p,
[data-theme="dark"] #pf-body p,
[data-theme="dark"] #pf-overlay span,
[data-theme="dark"] #pf-body span {
  color: #d0d0d0 !important;
}

/* Headings dentro do modal */
[data-theme="dark"] #pf-overlay h1,
[data-theme="dark"] #pf-overlay h2,
[data-theme="dark"] #pf-overlay h3,
[data-theme="dark"] #pf-overlay h4,
[data-theme="dark"] #pf-body h1,
[data-theme="dark"] #pf-body h2,
[data-theme="dark"] #pf-body h3,
[data-theme="dark"] #pf-body h4 {
  color: #e0e0e0 !important;
}


/* ==== Correção Específica para Classes do Pagefind UI ==== */
/* Sobrescrever estilos do pagefind-ui.css no modo dark */

/* Títulos dos resultados do Pagefind UI */
[data-theme="dark"] .pagefind-ui__result-title {
  color: #e0e0e0 !important;
}

/* Texto dos excerpts/snippets do Pagefind UI */
[data-theme="dark"] .pagefind-ui__result-excerpt,
[data-theme="dark"] .pagefind-ui__result-excerpt p {
  color: #d0d0d0 !important;
}

/* Container interno dos resultados */
[data-theme="dark"] .pagefind-ui__result-inner {
  color: #d0d0d0 !important;
}

/* Mensagens (contagem de resultados) */
[data-theme="dark"] .pagefind-ui__message {
  color: #e0e0e0 !important;
}

/* Lista de resultados */
[data-theme="dark"] .pagefind-ui__results {
  color: #d0d0d0 !important;
}

/* Cada item de resultado */
[data-theme="dark"] .pagefind-ui__result {
  color: #d0d0d0 !important;
  background: #2a2a2a !important;
  border-color: #333 !important;
}

/* Links dos resultados */
[data-theme="dark"] .pagefind-ui__result-link {
  color: #e0e0e0 !important;
}

/* Tags/badges nos resultados */
[data-theme="dark"] .pagefind-ui__result-tag {
  color: #d0d0d0 !important;
  background: #333 !important;
}

/* Imagens nos resultados */
[data-theme="dark"] .pagefind-ui__result-image {
  border-color: #333 !important;
}

/* Painel de filtros do Pagefind UI */
[data-theme="dark"] .pagefind-ui__filter-panel {
  background: #1a1a1a !important;
  color: #e0e0e0 !important;
}

/* Blocos de filtro */
[data-theme="dark"] .pagefind-ui__filter-block {
  background: #1a1a1a !important;
  color: #e0e0e0 !important;
}

/* Labels de filtro */
[data-theme="dark"] .pagefind-ui__filter-name {
  color: #e0e0e0 !important;
}

/* Labels de grupo de filtro (Ano, Órgão, Tipo) */
[data-theme="dark"] .pagefind-ui__filter-group-label {
  color: #e0e0e0 !important;
}

/* Labels individuais dos filtros */
[data-theme="dark"] .pagefind-ui__filter-label {
  color: #d0d0d0 !important;
}

/* Valores de filtro */
[data-theme="dark"] .pagefind-ui__filter-value {
  color: #d0d0d0 !important;
}

/* Checkboxes de filtro */
[data-theme="dark"] .pagefind-ui__filter-checkbox {
  border-color: #444 !important;
}

/* Drawer (container geral) */
[data-theme="dark"] .pagefind-ui__drawer {
  color: #d0d0d0 !important;
}

/* Área de resultados */
[data-theme="dark"] .pagefind-ui__results-area {
  color: #d0d0d0 !important;
}

/* Botão "Ver mais resultados" */
[data-theme="dark"] .pagefind-ui__button {
  color: var(--primary-color) !important;
  background: #2a2a2a !important;
  border-color: var(--primary-color) !important;
}

[data-theme="dark"] .pagefind-ui__button:hover {
  background: var(--primary-color) !important;
  color: white !important;
}

/* Sobrescrever variáveis CSS do Pagefind UI no modo dark */
[data-theme="dark"] .pagefind-ui {
  --pagefind-ui-primary: var(--primary-color);
  --pagefind-ui-text: #d0d0d0;
  --pagefind-ui-background: #252525;
  --pagefind-ui-border: #333;
  --pagefind-ui-tag: #333;
}


/* ==== Correção Adicional: Sidebar de Filtros do Pagefind ==== */
/* Garantir contraste adequado em TODOS os elementos da sidebar */

/* Títulos dos grupos de filtros na sidebar (Ano, Órgão, Tipo) */
[data-theme="dark"] .pagefind-ui__filter-panel summary,
[data-theme="dark"] .pagefind-ui__filter-panel details > summary {
  background: #1a1a1a !important;
  color: #e0e0e0 !important;
  font-weight: 600 !important;
}

/* Conteúdo dos filtros expandidos */
[data-theme="dark"] .pagefind-ui__filter-panel details {
  background: #1a1a1a !important;
  color: #d0d0d0 !important;
}

/* Labels dos checkboxes na sidebar */
[data-theme="dark"] .pagefind-ui__filter-panel label,
[data-theme="dark"] .pagefind-ui__filter-panel .pagefind-ui__filter-label {
  color: #d0d0d0 !important;
}

/* Contadores ao lado dos labels (ex: "(1)", "(2)", "(7)") */
[data-theme="dark"] .pagefind-ui__filter-panel .pagefind-ui__filter-count {
  color: #b0b0b0 !important;
}

/* Inputs de checkbox na sidebar */
[data-theme="dark"] .pagefind-ui__filter-panel input[type="checkbox"] {
  border-color: #555 !important;
  background: #2a2a2a !important;
}

[data-theme="dark"] .pagefind-ui__filter-panel input[type="checkbox"]:checked {
  background: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
}

/* Fieldsets na sidebar */
[data-theme="dark"] .pagefind-ui__filter-panel fieldset {
  border-color: #333 !important;
}

/* Legends na sidebar */
[data-theme="dark"] .pagefind-ui__filter-panel legend {
  color: #e0e0e0 !important;
}

/* Qualquer texto dentro da sidebar de filtros */
[data-theme="dark"] .pagefind-ui__filter-panel * {
  color: #d0d0d0 !important;
}

/* Sobrescrever especificamente para títulos */
[data-theme="dark"] .pagefind-ui__filter-panel summary * {
  color: #e0e0e0 !important;
}

/* Garantir que todos os elementos details/summary sejam visíveis */
[data-theme="dark"] details summary {
  color: #e0e0e0 !important;
}

[data-theme="dark"] details {
  color: #d0d0d0 !important;
}

/* Forçar cor em todos os spans dentro da sidebar */
[data-theme="dark"] .pagefind-ui__filter-panel span {
  color: inherit !important;
}
