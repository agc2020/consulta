<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Visualizador JSON – lei-16024-2008.json</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; margin:0;}}
    header{{padding:12px 16px; border-bottom:1px solid #e5e7eb; display:flex; gap:8px; align-items:center;}}
    main{{padding:16px;}}
    pre{{white-space:pre-wrap; word-break:break-word; font-size:13px; line-height:1.45;}}
    button{{padding:.4rem .6rem; border:1px solid #d1d5db; border-radius:6px; background:#fff; cursor:pointer}}
    .meta{{color:#6b7280; font-size:12px}}
  </style>
</head>
<body>
  <header>
    <strong>JSON:</strong> <code>lei-16024-2008.json</code>
    <button id="copy">Copiar</button>
    <a href="lei-16024-2008.json" download>Baixar</a>
    <span class="meta" id="meta"></span>
  </header>
  <main>
    <pre id="out">Carregando lei-16024-2008.json…</pre>
  </main>
  <script>
    const outEl = document.getElementById('out');
    const metaEl = document.getElementById('meta');
    const btnCopy = document.getElementById('copy');
    const url = "lei-16024-2008.json";
    const t0 = performance.now();
    fetch(url).then(async (res) => {
      metaEl.textContent = ` • status ${{res.status}} ${{res.statusText}}`;
      const buf = await res.arrayBuffer();
      const sizeKB = (buf.byteLength/1024).toFixed(1) + " KB";
      const t1 = performance.now();
      metaEl.textContent += ` • ${{sizeKB}} • ${{(t1 - t0).toFixed(0)}} ms`;
      const txt = new TextDecoder("utf-8").decode(buf);
      try {
        const j = JSON.parse(txt);
        outEl.textContent = JSON.stringify(j, null, 2);
      } catch (err) {
        outEl.textContent = txt;
      }
    }).catch((err) => {
      outEl.textContent = "Falha ao carregar o JSON: " + err;
    });
    btnCopy.onclick = () => {
      const content = outEl.textContent;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(content).catch(() => {});
      } else {
        const sel = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(outEl);
        sel.removeAllRanges();
        sel.addRange(range);
        try {
          document.execCommand('copy');
        } finally {
          sel.removeAllRanges();
        }
      }
    };
  </script>
</body>
</html>